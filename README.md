# Bitpay Spring Boot Starter

ÛŒÚ© Spring Boot Starter Ø¨Ø±Ø§ÛŒ ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¢Ø³Ø§Ù† Ø¨Ø§ Ø¯Ø±Ú¯Ø§Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª Ø¨ÛŒØªâ€ŒÙ¾ÛŒ (BitPay.ir)

## ğŸ“‹ ÙÙ‡Ø±Ø³Øª Ù…Ø·Ø§Ù„Ø¨

- [Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡](#-Ø¯Ø±Ø¨Ø§Ø±Ù‡-Ù¾Ø±ÙˆÚ˜Ù‡)
- [ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§](#-ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§)
- [Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§](#-Ù¾ÛŒØ´Ù†ÛŒØ§Ø²Ù‡Ø§)
- [Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ](#-Ù†ØµØ¨-Ùˆ-Ø±Ø§Ù‡Ø§Ù†Ø¯Ø§Ø²ÛŒ)
- [Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ](#-Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ)
- [Ù†Ø­ÙˆÙ‡ Ø§Ø³ØªÙØ§Ø¯Ù‡](#-Ù†Ø­ÙˆÙ‡-Ø§Ø³ØªÙØ§Ø¯Ù‡)
- [Ú©Ø¯Ù‡Ø§ÛŒ Ø®Ø·Ø§](#-Ú©Ø¯Ù‡Ø§ÛŒ-Ø®Ø·Ø§)
- [Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ](#-Ù…Ø«Ø§Ù„Ù‡Ø§ÛŒ-Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ)
- [Ù…Ø´Ø§Ø±Ú©Øª Ø¯Ø± ØªÙˆØ³Ø¹Ù‡](#-Ù…Ø´Ø§Ø±Ú©Øª-Ø¯Ø±-ØªÙˆØ³Ø¹Ù‡)
- [Ù…Ø¬ÙˆØ²](#-Ù…Ø¬ÙˆØ²)

## ğŸ¯ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡

Ø§ÛŒÙ† Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ ÛŒÚ© Spring Boot Starter Ø§Ø³Øª Ú©Ù‡ Ø§Ù…Ú©Ø§Ù† ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø³Ø§Ø¯Ù‡ Ùˆ Ø³Ø±ÛŒØ¹ Ø¨Ø§ Ø³Ø±ÙˆÛŒØ³ Ø¯Ø±Ú¯Ø§Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª Ø¨ÛŒØªâ€ŒÙ¾ÛŒ Ø±Ø§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ÛŒÙ† Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ù‡ Ø±Ø§Ø­ØªÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø±Ø¯Ù‡ Ùˆ ÙˆØ¶Ø¹ÛŒØª ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ Ø±Ø§ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ú©Ù†ÛŒØ¯.

## âœ¨ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§

- âœ… Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø§ Spring Boot Auto-Configuration
- âœ… Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù¾Ø±Ø¯Ø§Ø®Øª Ø¨Ù‡ Ø¯Ø±Ú¯Ø§Ù‡ Ø¨ÛŒØªâ€ŒÙ¾ÛŒ
- âœ… Ø¯Ø±ÛŒØ§ÙØª Ùˆ Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§
- âœ… Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§ Ø¨Ø§ Ú©Ø¯Ù‡Ø§ÛŒ Ø®Ø·Ø§ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯
- âœ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Lombok Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù‡Ø´ Ú©Ø¯ ØªÚ©Ø±Ø§Ø±ÛŒ
- âœ… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² RestClient Ù…Ø¯Ø±Ù† Spring
- âœ… Ù…Ø³ØªÙ†Ø¯Ø³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„ JavaDoc

## ğŸ“¦ Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§

- Java 17 ÛŒØ§ Ø¨Ø§Ù„Ø§ØªØ±
- Spring Boot 3.x
- Maven ÛŒØ§ Gradle

## ğŸš€ Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ

### Maven

```xml
<dependency>
    <groupId>io.github.kassa-charity</groupId>
    <artifactId>bitpay-spring-boot-starter</artifactId>
    <version>1.0.0</version>
</dependency>
```


### Gradle

```textmate
implementation 'com.liam:bitpay-spring-boot-starter:1.0.0'
```


## âš™ï¸ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ

ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø²ÛŒØ± Ø±Ø§ Ø¯Ø± ÙØ§ÛŒÙ„ `application.properties` ÛŒØ§ `application.yml` Ø®ÙˆØ¯ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯:

### application.properties

```properties
# Ú©Ù„ÛŒØ¯ API Ø¯Ø±ÛŒØ§ÙØªÛŒ Ø§Ø² Ø¨ÛŒØªâ€ŒÙ¾ÛŒ (Ø§Ø¬Ø¨Ø§Ø±ÛŒ)
bitpay.api-key=your-api-key-here

# Ø¢Ø¯Ø±Ø³ Ù¾Ø§ÛŒÙ‡ Ø³Ø±ÙˆÛŒØ³ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ - Ù¾ÛŒØ´â€ŒÙØ±Ø¶: https://bitpay.ir)
bitpay.base-url=https://bitpay.ir
```


### application.yml

```yaml
bitpay:
  api-key: your-api-key-here
  base-url: https://bitpay.ir  # Ø§Ø®ØªÛŒØ§Ø±ÛŒ
```


## ğŸ’» Ù†Ø­ÙˆÙ‡ Ø§Ø³ØªÙØ§Ø¯Ù‡

### 1. ØªØ²Ø±ÛŒÙ‚ BitpayClient

```java
@Service
public class PaymentService {
    
    private final BitpayClient bitpayClient;
    
    public PaymentService(BitpayClient bitpayClient) {
        this.bitpayClient = bitpayClient;
    }
}
```


### 2. Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù¾Ø±Ø¯Ø§Ø®Øª

```java
public SendResult createPayment(PaymentRequest request) {
    BitpaySend bitpaySend = BitpaySend.builder()
        .amount("10000")                           // Ù…Ø¨Ù„Øº Ø¨Ù‡ Ø±ÛŒØ§Ù„ (Ø§Ø¬Ø¨Ø§Ø±ÛŒ)
        .redirect("https://yoursite.com/callback") // Ø¢Ø¯Ø±Ø³ Ø¨Ø§Ø²Ú¯Ø´Øª (Ø§Ø¬Ø¨Ø§Ø±ÛŒ)
        .name("Ø¹Ù„ÛŒ Ø§Ø­Ù…Ø¯ÛŒ")                        // Ù†Ø§Ù… Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒÚ©Ù†Ù†Ø¯Ù‡
        .email("ali@example.com")                  // Ø§ÛŒÙ…ÛŒÙ„
        .mobileNum("09123456789")                  // Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„
        .description("Ø®Ø±ÛŒØ¯ Ù…Ø­ØµÙˆÙ„")                // ØªÙˆØ¶ÛŒØ­Ø§Øª
        .factorId("INV-1001")                      // Ø´Ù…Ø§Ø±Ù‡ ÙØ§Ú©ØªÙˆØ±
        .build();
    
    try {
        SendResult result = bitpayClient.send(bitpaySend);
        
        // Ù‡Ø¯Ø§ÛŒØª Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ø¢Ø¯Ø±Ø³ redirectUrl
        return result;
        
    } catch (IllegalArgumentException e) {
        // Ø®Ø·Ø§ÛŒ Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙˆØ±ÙˆØ¯ÛŒ
        log.error("Invalid input: {}", e.getMessage());
        throw e;
    } catch (RuntimeException e) {
        // Ø®Ø·Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø¯Ø±Ú¯Ø§Ù‡
        log.error("Payment gateway error: {}", e.getMessage());
        throw e;
    }
}
```


### 3. Ø¯Ø±ÛŒØ§ÙØª ÙˆØ¶Ø¹ÛŒØª ØªØ±Ø§Ú©Ù†Ø´

```java
public BitpayGetResult verifyPayment(String transId, String idGet) {
    BitpayGet bitpayGet = BitpayGet.builder()
        .transId(transId)     // Ø´Ù†Ø§Ø³Ù‡ ØªØ±Ø§Ú©Ù†Ø´
        .idGet(idGet)         // Ø´Ù†Ø§Ø³Ù‡ Ø¯Ø±ÛŒØ§ÙØª
        .factorId("INV-1001") // Ø´Ù…Ø§Ø±Ù‡ ÙØ§Ú©ØªÙˆØ±
        .build();
    
    try {
        BitpayGetResult result = bitpayClient.get(bitpayGet);
        
        // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø±Ø¯Ø§Ø®Øª
        if (result.getStatus() == 1) {
            // Ù¾Ø±Ø¯Ø§Ø®Øª Ù…ÙˆÙÙ‚
            log.info("Payment successful. Amount: {}", result.getAmount());
        } else {
            // Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ø§Ù…ÙˆÙÙ‚
            log.warn("Payment failed. Status: {}", result.getStatus());
        }
        
        return result;
        
    } catch (RuntimeException e) {
        log.error("Error verifying payment: {}", e.getMessage());
        throw e;
    }
}
```


## âš ï¸ Ú©Ø¯Ù‡Ø§ÛŒ Ø®Ø·Ø§

### Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø®Øª (BitpaySendErrorCodes)

| Ú©Ø¯ | ØªÙˆØ¶ÛŒØ­ |
|----|-------|
| `-1` | Ú©Ù„ÛŒØ¯ API Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª |
| `-2` | Ù…Ø¨Ù„Øº Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª |
| `-3` | Ø¢Ø¯Ø±Ø³ Ø¨Ø§Ø²Ú¯Ø´Øª (redirect) Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª |
| `-4` | Ø¯Ø±Ú¯Ø§Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÛŒØ§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯ |
| `-5` | Ø®Ø·Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ Ø¯Ø±Ú¯Ø§Ù‡ |

### Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª ÙˆØ¶Ø¹ÛŒØª (BitpayGetErrorCodes)

| Ú©Ø¯ | ØªÙˆØ¶ÛŒØ­ |
|----|-------|
| `-1` | Ú©Ù„ÛŒØ¯ API Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª |
| `-2` | Ø´Ù†Ø§Ø³Ù‡ ØªØ±Ø§Ú©Ù†Ø´ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª |
| `-3` | Ø´Ù†Ø§Ø³Ù‡ Ø¯Ø±ÛŒØ§ÙØª (idGet) Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª |
| `-4` | Ø´Ù…Ø§Ø±Ù‡ ÙØ§Ú©ØªÙˆØ± ÛŒØ§ÙØª Ù†Ø´Ø¯ ÛŒØ§ Ø¹Ù…Ù„ÛŒØ§Øª Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯ |

## ğŸ“š Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ

### Ù…Ø«Ø§Ù„ Ú©Ø§Ù…Ù„ Ú©Ù†ØªØ±Ù„Ø± Ù¾Ø±Ø¯Ø§Ø®Øª

```java
@RestController
@RequestMapping("/api/payment")
public class PaymentController {
    
    private final BitpayClient bitpayClient;
    
    public PaymentController(BitpayClient bitpayClient) {
        this.bitpayClient = bitpayClient;
    }
    
    @PostMapping("/create")
    public ResponseEntity<PaymentResponse> createPayment(@RequestBody PaymentRequest request) {
        BitpaySend bitpaySend = BitpaySend.builder()
            .amount(request.getAmount())
            .redirect("https://mysite.com/payment/callback")
            .name(request.getCustomerName())
            .email(request.getCustomerEmail())
            .mobileNum(request.getCustomerMobile())
            .description(request.getDescription())
            .factorId(request.getOrderId())
            .build();
        
        SendResult result = bitpayClient.send(bitpaySend);
        
        PaymentResponse response = new PaymentResponse();
        response.setRedirectUrl(result.getRedirectUrl());
        response.setTransactionCode(result.getResult());
        
        return ResponseEntity.ok(response);
    }
    
    @GetMapping("/callback")
    public String paymentCallback(@RequestParam String trans_id, 
                                  @RequestParam String id_get,
                                  @RequestParam String factor_id) {
        BitpayGet bitpayGet = BitpayGet.builder()
            .transId(trans_id)
            .idGet(id_get)
            .factorId(factor_id)
            .build();
        
        BitpayGetResult result = bitpayClient.get(bitpayGet);
        
        if (result.getStatus() == 1) {
            // Ø°Ø®ÛŒØ±Ù‡ ØªØ±Ø§Ú©Ù†Ø´ Ù…ÙˆÙÙ‚ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
            return "redirect:/payment/success";
        } else {
            // Ù…Ø¯ÛŒØ±ÛŒØª ØªØ±Ø§Ú©Ù†Ø´ Ù†Ø§Ù…ÙˆÙÙ‚
            return "redirect:/payment/failed";
        }
    }
}
```


## ğŸ¤ Ù…Ø´Ø§Ø±Ú©Øª Ø¯Ø± ØªÙˆØ³Ø¹Ù‡

Ù…Ø´Ø§Ø±Ú©Øª Ø´Ù…Ø§ Ø¯Ø± Ø¨Ù‡Ø¨ÙˆØ¯ Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ø³ÛŒØ§Ø± Ø§Ø±Ø²Ø´Ù…Ù†Ø¯ Ø§Ø³Øª! Ù„Ø·ÙØ§Ù‹ Ù…Ø±Ø§Ø­Ù„ Ø²ÛŒØ± Ø±Ø§ Ø¯Ù†Ø¨Ø§Ù„ Ú©Ù†ÛŒØ¯:

1. Ø§ÛŒÙ† Ù…Ø®Ø²Ù† Ø±Ø§ Fork Ú©Ù†ÛŒØ¯
2. ÛŒÚ© Ø´Ø§Ø®Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ ÙˆÛŒÚ˜Ú¯ÛŒ Ø®ÙˆØ¯ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯ (`git checkout -b feature/amazing-feature`)
3. ØªØºÛŒÛŒØ±Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ Commit Ú©Ù†ÛŒØ¯ (`git commit -m 'Add some amazing feature'`)
4. Ø´Ø§Ø®Ù‡ Ø±Ø§ Push Ú©Ù†ÛŒØ¯ (`git push origin feature/amazing-feature`)
5. ÛŒÚ© Pull Request Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯

## ğŸ“ Ù…Ø¬ÙˆØ²

Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ ØªØ­Øª Ù…Ø¬ÙˆØ² MIT Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨ÛŒØ´ØªØ±ØŒ ÙØ§ÛŒÙ„ `LICENSE` Ø±Ø§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯.

## ğŸ“ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ

- ğŸŒ ÙˆØ¨Ø³Ø§ÛŒØª Ø¨ÛŒØªâ€ŒÙ¾ÛŒ: [https://bitpay.ir](https://bitpay.ir)
- ğŸ“§ Ø§ÛŒÙ…ÛŒÙ„ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ: support@bitpay.ir
- ğŸ“– Ù…Ø³ØªÙ†Ø¯Ø§Øª API: Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ø¨Ù‡ Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¨ÛŒØªâ€ŒÙ¾ÛŒ

---

**Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…:** Ø§ÛŒÙ† Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ ØºÛŒØ±Ø±Ø³Ù…ÛŒ Ø§Ø³Øª Ùˆ ØªÙˆØ³Ø· ØªÛŒÙ… Ø¨ÛŒØªâ€ŒÙ¾ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ù„Ø·ÙØ§Ù‹ Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Ù…Ø­ÛŒØ· ØªÙˆÙ„ÛŒØ¯ØŒ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯.